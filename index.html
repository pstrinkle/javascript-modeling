<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" media="screen">

    <!-- above the fold, it is render-blocking deliberately. -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Javascript-modeling by pstrinkle</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>javascript-modeling</h1>
        <h2>Some fun and somewhat silly modeling modules written in pure JavaScript</h2>
        <a href="https://github.com/pstrinkle/javascript-modeling" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3><a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Welcome to GitHub Pages.</h3>
          <p>...</p>

          <h3>Vectorspace</h3>
          <div>
            <p>You can upload a text file of newline separated stop words.  These 
            words will be stripped from the input documents.</p>
            <button id='stopwords'>Upload Stopwords (.txt)</button>
            <input type='file' id='stopwords_input' style="display:none;" />
            <br />
            <textarea id='content' style="width:100%;" rows="5"></textarea><br />
            <textarea id='content2' style="width:100%;" rows="5"></textarea><br />
            <button id='btn'>process</button>
            <pre id='out'></pre>
            <pre id='log'></pre>
          </div>
<script>
$(function() {
    $('#stopwords').on('click', function(event) {
        $('#stopwords_input').trigger('click');
    });
    $('#stopwords_input').on('change', function(event) {
        if (this.files[0] == undefined) {
            return;
        }
        var reader = new FileReader();
        reader.onload = function(){
            var text = reader.result;
            VectorSpace.importStopwords(text);
        };
        reader.readAsText(this.files[0]);
    });
    $('#btn').on('click', function(event) {
        event.preventDefault();
        $('#log').empty();
        var $out = $('#out');
        $out.empty();

        var modelA = VectorSpace.process($('#content').val());
        var modelB = VectorSpace.process($('#content2').val());
        var score = VectorSpace.cosineSimilarity(modelA, modelB) * 100;

        $out.append(JSON.stringify(modelA, null, 2) + '\n');
        $out.append(JSON.stringify(modelB, null, 2) + '\n');
        $out.append(score + '%');
    });
});
</script>

          <h3>Bigrams</h3>
          <div>
            <textarea id='learning' style="width:100%;" rows="10"></textarea><br />
            <button id='learn'>Learn</button>
            <button id='write'>Write</button>
            <p id='output'></p>
            <pre id='log'></pre>
          </div>
<script>
$(function() {
    var $learning = $('#learning');

    $('#learn').on('click', function(event) {
        Bigrams.init($learning.val());
        $learning.val('');
    });

    $('#write').on('click', function(event) {
        var sofar = $learning.val();
        var words = sofar.split(' '); /* for now, don't allow double space */
        var next = '';

        if (sofar.length == 0) {
            next = Bigrams.generate("|");
        } else {
            var last = words[words.length-1];
            $('#log').append(last + '\n');
            if (last === '.' || last.endswith(".")) {
            	console.log('asdfasdf');
            	next = Bigrams.generate("|");
            } else {
                next = Bigrams.generate(last);
            }
        }

        if (next === '.') {
        	$learning.val(sofar + next);
        } else {
        	$learning.val(sofar + ' ' + next);	
        }
    });
});
</script>

          <h3>License</h3>
          <p><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></p>

          <h3><a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Support or Contact</h3>
          <a href="https://twitter.com/YammyCozonac" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @YammyCozonac</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
          <a class="github-button" href="https://github.com/pstrinkle" data-style="mega" aria-label="Follow @pstrinkle on GitHub">Follow @pstrinkle</a>
          <!-- <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span> -->
          <script async defer src="https://buttons.github.io/buttons.js"></script>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/pstrinkle/javascript-modeling/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/pstrinkle/javascript-modeling/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/pstrinkle/javascript-modeling"></a> is maintained by <a href="https://github.com/pstrinkle">pstrinkle</a>.</p>
        </aside>
      </div>
    </div>

    <script src="src/bigrams.js"></script>
    <script src="src/vectorspace.js"></script>
  
  </body>
</html>
